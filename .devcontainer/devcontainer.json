{
    "name": "Django Full-Stack Dev",
    "build": {
        "dockerfile": "Dockerfile",
        "context": ".."
    },
    "features": {
        "ghcr.io/devcontainers/features/git-lfs": {},
        "ghcr.io/devcontainers/features/github-cli": {},
        "ghcr.io/devcontainers/features/common-utils": {
            "installZsh": false,  // already included in base image
            "installOhMyZsh": false,
            "upgradePackages": false,
            "username": "vc",
            "uid": "1000",
            "gid": "1000"
        }
    },
    "remoteUser": "vc",
    "containerUser": "vc",
    "customizations": {
        "vscode": {
            "settings": {
                // Editor
                "editor.formatOnSave": true,
                "editor.codeActionsOnSave": {
                    "source.organizeImports": "explicit"
                },
                "editor.rulers": [
                    120
                ],
                "editor.minimap.enabled": false,
                "editor.bracketPairColorization.enabled": true,
                "editor.linkedEditing": true,
                "editor.suggest.preview": true,
                // Python Configuration
                "python.defaultInterpreterPath": "/usr/local/bin/python",
                "python.languageServer": "None",
                "[python]": {
                    "editor.defaultFormatter": "charliermarsh.ruff",
                    "editor.formatOnSave": true,
                    "editor.codeActionsOnSave": {
                        "source.fixAll.ruff": "explicit",
                        "source.organizeImports.ruff": "explicit"
                    }
                },
                "ruff.configuration": "pyproject.toml",
                // Testing
                "python.testing.pytestEnabled": true,
                "python.testing.unittestEnabled": false,
                "python.testing.pytestArgs": [
                    "tests"
                ],
                // Ty Language Server (Astral.sh) - IntelliSense, type checking, etc.
                // Provides autocomplete, go-to-definition, hover docs, type checking
                "ty.importStrategy": "fromEnvironment",
                // Files
                "files.exclude": {
                    "**/__pycache__": true,
                    "**/*.pyc": true,
                    "**/.pytest_cache": true,
                    "**/.mypy_cache": true,
                    "**/node_modules": true,
                    "**/.DS_Store": true,
                    "**/htmlcov": true,
                    "**/.coverage": true
                },
                "files.watcherExclude": {
                    "**/__pycache__/**": true,
                    "**/node_modules/**": true,
                    "**/.git/objects/**": true,
                    "**/.git/subtree-cache/**": true,
                    "**/venv/**": true
                },
                "files.autoSave": "afterDelay",
                "files.autoSaveDelay": 1000,
                "files.trimTrailingWhitespace": true,
                "files.insertFinalNewline": true,
                // Django Template Support
                "[django-html]": {
                    "editor.defaultFormatter": "batisteo.vscode-django",
                    "editor.tabSize": 2
                },
                "[html]": {
                    "editor.defaultFormatter": "vscode.html-language-features",
                    "editor.tabSize": 2
                },
                // Frontend
                "[javascript]": {
                    "editor.defaultFormatter": "esbenp.prettier-vscode",
                    "editor.tabSize": 2
                },
                "[css]": {
                    "editor.defaultFormatter": "esbenp.prettier-vscode",
                    "editor.tabSize": 2
                },
                "[json]": {
                    "editor.defaultFormatter": "esbenp.prettier-vscode",
                    "editor.tabSize": 2
                },
                "[markdown]": {
                    "editor.defaultFormatter": "esbenp.prettier-vscode",
                    "files.trimTrailingWhitespace": false,
                    "editor.formatOnSave": true
                },
                // TOML Configuration
                "[toml]": {
                    "editor.defaultFormatter": "tamasfe.even-better-toml",
                    "editor.formatOnSave": true
                },
                "evenBetterToml.formatter.alignEntries": true,
                "evenBetterToml.formatter.arrayAutoExpand": true,
                "evenBetterToml.schema.enabled": false,
                // Emmet
                "emmet.includeLanguages": {
                    "django-html": "html"
                },
                // Git
                "git.autofetch": true,
                "git.confirmSync": false,
                "git.enableSmartCommit": true,
                // Terminal
                "terminal.integrated.defaultProfile.linux": "zsh",
                "terminal.integrated.fontSize": 13,
                "terminal.integrated.persistentSessionReviveProcess": "onExit",
                // GitHub Copilot
                "github.copilot.enable": {
                    "*": true,
                    "plaintext": false,
                    "markdown": true,
                    "python": true
                },
                // Coverage
                "coverage-gutters.coverageFileNames": [
                    "coverage.xml",
                    "coverage.lcov",
                    ".coverage"
                ]
            },
            "extensions": [
                // Python Development (Astral.sh Stack)
                "ms-python.python",
                "astral-sh.ty",
                "charliermarsh.ruff",
                // Django Specific
                "batisteo.vscode-django",
                "bibhasdn.django-html",
                "bibhasdn.django-snippets",
                // Testing & Coverage
                "ms-python.pytest",
                "ryanluker.vscode-coverage-gutters",
                // GitHub & Git
                "github.copilot-chat",
                "github.vscode-pull-request-github",
                "eamodio.gitlens",
                // DevContainers
                "ms-vscode-remote.remote-containers",
                "ms-azuretools.vscode-docker",
                // Frontend (HTML, CSS, JS)
                "esbenp.prettier-vscode",
                "bradlc.vscode-tailwindcss",
                "formulahendry.auto-rename-tag",
                "pranaygp.vscode-css-peek",
                // Database
                "mtxr.sqltools",
                "mtxr.sqltools-driver-pg",
                "cweijan.vscode-postgresql-client2",
                // Utilities
                "aaron-bond.better-comments",
                "wayou.vscode-todo-highlight",
                "usernamehw.errorlens",
                // "streetsidesoftware.code-spell-checker",
                "christian-kohler.path-intellisense",
                "ms-vsliveshare.vsliveshare",
                "vscodevim.vim",
                // Markdown
                "yzhang.markdown-all-in-one",
                // REST API Testing
                "humao.rest-client",
                // YAML & TOML
                "redhat.vscode-yaml",
                "tamasfe.even-better-toml",
                // ENV files
                "mikestead.dotenv",
                // Jupyter
                "ms-toolsai.jupyter",
                "ms-toolsai.jupyter-keymap"
            ]
        }
    },
    "mounts": [
        "source=my-site-zsh-history,target=/commandhistory,type=volume"
    ],
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/my-site,type=bind,consistency=cached",
    "workspaceFolder": "/workspaces/my-site",
    "containerEnv": {
        "DEVCONTAINER_SCRIPTS_DIR": "${containerWorkspaceFolder}/.devcontainer/scripts"
    },
    // run post-create scripts (in .devcontainer/scripts/) to set up environment, install dependencies, etc.
    "postCreateCommand": "bash ${DEVCONTAINER_SCRIPTS_DIR}/post-create-dotfiles.sh && bash ${DEVCONTAINER_SCRIPTS_DIR}/post-create-pkgs.sh && bash ${DEVCONTAINER_SCRIPTS_DIR}/setup-zsh-history.sh"
}
